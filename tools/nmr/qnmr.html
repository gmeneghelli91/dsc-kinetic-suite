<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>qNMR Calculator (Quantitative NMR)</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0KOVEMVIARBEGEOOfUG6TUeJ5serWYUSsfG5nm7biBGYALWaYb4lo" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #343a40;
            max-width: 900px;
            margin: 20px auto;
            padding: 0 15px;
            background-color: #f8f9fa;
        }
        .card {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 25px 30px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        h1, h2, h3, h4 {
            color: #0056b3;
            margin-top: 0;
            padding-bottom: 10px;
        }
        h1 {
            text-align: center;
            color: #212529;
            border: none;
        }
        h2 {
           border-bottom: 2px solid #e9ecef;
        }
        h3 {
            color: #0056b3;
            border-bottom: 1px solid #e9ecef;
        }
        h4 {
             padding-bottom: 5px;
             border: none;
             color: #17a2b8;
        }
        p, li {
            text-align: justify;
            margin-bottom: 1rem;
        }
        .theory {
            margin: 20px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-left: 5px solid #0056b3;
            border-radius: 4px;
        }
        .formula {
            display: block;
            text-align: center;
            margin: 25px auto;
            padding: 15px;
            font-size: 1.2em;
            background-color: #e9ecef;
            border-radius: 5px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #495057;
        }
        input[type="number"] {
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
        }
        button {
            grid-column: 1 / -1;
            padding: 12px 20px;
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 20px;
        }
        button:hover {
            background-color: #0056b3;
        }
        #result-container {
            margin-top: 30px;
            padding: 20px;
            border-top: 2px solid #e9ecef;
            text-align: center;
        }
        #result {
            font-size: 1.8em;
            font-weight: bold;
            color: #28a745;
        }
        .hidden {
            display: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px;
            border: 1px solid #dee2e6;
            text-align: left;
        }
        th {
            background-color: #e9ecef;
            font-weight: 600;
        }
        tbody tr:nth-child(odd) {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>

    <div class="card">
        <h1>qNMR Calculator</h1>
        <h2>(Quantitative Nuclear Magnetic Resonance)</h2>
    </div>

    <div class="card">
        <h3>Theoretical Introduction and Practical Guide</h3>
        <div class="theory">
            <p>Quantitative Nuclear Magnetic Resonance (qNMR) is a powerful analytical technique used to determine the purity or concentration of a sample. As a <strong>primary method of measurement</strong>, signal intensity is directly proportional to the number of nuclei, eliminating the need for calibration curves with identical standards to the analyte.</p>
            <p>The principle is based on adding an <strong>internal standard</strong> of known purity and mass. By comparing the integral of an analyte signal with that of the standard, the amount of analyte can be precisely calculated.</p>
            <p>The internal reference method is generally preferred over external methods due to its higher precision and lower uncertainties. Once materials are weighed into the same vial, the ratio of analyte and reference remains constant, and the amount of added solvent is not critical for quantification.</p>
        </div>

        <h4>The qNMR Formula</h4>
        <p>The purity of the analyte (\(P_{an}\)) in percentage (\%) is given by:</p>
        <div class="formula">
            \[ P_{an} [\%] = \frac{I_{an}}{I_{std}} \times \frac{N_{std}}{N_{an}} \times \frac{MW_{an}}{MW_{std}} \times \frac{m_{std}}{m_{sample}} \times P_{std} [\%] \]
        </div>
        <ul>
            <li>\(I_{an}\): Integral of the <strong>analyte</strong> signal.</li>
            <li>\(I_{std}\): Integral of the <strong>standard</strong> signal.</li>
            <li>\(N_{an}\): Number of protons of the <strong>analyte</strong> signal.</li>
            <li>\(N_{std}\): Number of protons of the <strong>standard</strong> signal.</li>
            <li>\(MW_{an}\): Molecular Weight of the <strong>analyte</strong> (g/mol).</li>
            <li>\(MW_{std}\): Molecular Weight of the <strong>standard</strong> (g/mol).</li>
            <li>\(m_{sample}\): Mass of the sample containing the analyte (mg).</li>
            <li>\(m_{std}\): Mass of the <strong>internal standard</strong> (mg).</li>
            <li>\(P_{std}\): Purity of the <strong>internal standard</strong> (%).</li>
        </ul>

        <h4>Guide to Preparation and Acquisition</h4>
        <p>For accurate analysis, follow these recommendations:</p>
        <ul>
            <li><strong>Choice of Standard:</strong> The standard should be highly pure (≥99.5%), stable, non-volatile, non-hygroscopic, free of residual water, highly soluble in common deuterated NMR solvents, and have few signals that minimize overlap with the analyte.</li>
            <li><strong>Compatibility Checks:</strong> After selecting a suitable reference standard, check the mixture for chemical stability and inertness to avoid reactions between the sample, reference, or solvent. Perform NMR experiments at t=0 and a later time (e.g., 5, 12, or 24h) to measure tolerance. The relevant signals must not overlap with each other or with impurities.</li>
            <li><strong>Metrological Weighing:</strong> Reliable weighing values are mandatory as they directly influence the result. Use a micro-balance or similar high-precision balance (e.g., readability of 100 ng). Weighing errors are the main source of uncertainty. Weigh sample and reference into an HPLC vial, not directly into the NMR tube. Ensure consistent units (e.g., both masses in mg).</li>
            <li><strong>NMR Parameters:</strong> The most critical parameter is the relaxation time (\(d1\)). Set \(d1 \geq 7 \times T_1\), where \(T_1\) is the longest relaxation time among the signals to be integrated. If \(T_1\) is unknown, use a conservative value (e.g., 30-60 seconds) to ensure accurate quantification. Ensure an S/N > 250. It is crucial to determine \(T_1\) in the mixture before the experiment starts. No spinning should be applied to avoid spinning sidebands.</li>
            <li><strong>Processing:</strong> Perform meticulous manual phase and baseline correction before integrating to obtain accurate integrals. Always perform integration consistently for both signals, either including or excluding C-satellites.</li>
            <li><strong>Uncertainty Budget:</strong> The biggest contributions to overall measurement uncertainty often come from repeatability and the purity of the reference standard. Weighing values also contribute, depending on the balance used.</li>
        </ul>

        <h3>Table of Common Internal Standards for ¹H-qNMR</h3>
        <table>
            <thead>
                <tr>
                    <th>Standard</th>
                    <th>Molecular Weight (g/mol)</th>
                    <th>Reference ¹H Signal (in CDCl₃ or typical solvent)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Dimethyl sulfone (DMSO₂)</td>
                    <td>94.13</td>
                    <td>~3.0 ppm (singlet, 6H)</td>
                </tr>
                <tr>
                    <td>1,3,5-Trimethoxybenzene</td>
                    <td>168.19</td>
                    <td>~6.1 ppm (s, 3H, Ar-H) and ~3.75 ppm (s, 9H, OMe)</td>
                </tr>
                <tr>
                    <td>1,4-Dinitrobenzene</td>
                    <td>168.11</td>
                    <td>~8.4 ppm (singlet, 4H)</td>
                </tr>
                <tr>
                    <td>Dimethyl terephthalate</td>
                    <td>194.19</td>
                    <td>~8.1 ppm (s, 4H, Ar-H) and ~3.9 ppm (s, 6H, OMe)</td>
                </tr>
                <tr>
                    <td>Maleic acid</td>
                    <td>116.07</td>
                    <td>~6.3 ppm (singlet, 2H)</td>
                </tr>
                <tr>
                    <td>Ethylene carbonate</td>
                    <td>88.06</td>
                    <td>~4.5 ppm (singlet, 4H)</td>
                </tr>
                <tr>
                    <td>Calcium formate</td>
                    <td>130.11</td>
                    <td>~8.4 ppm (singlet, 2H)</td>
                </tr>
                <tr>
                    <td>Benzoic acid</td>
                    <td>122.12</td>
                    <td>~8.1 ppm (multiplet, 2H, ortho-H)</td>
                </tr>
                <tr>
                    <td>Duroquinone</td>
                    <td>164.2</td>
                    <td>~2.0 ppm (singlet, 12H)</td>
                </tr>
                <tr>
                    <td>Potassium hydrogen phthalate</td>
                    <td>204.22</td>
                    <td>~7.5-7.9 ppm (multiplet, 4H)</td>
                </tr>
                <tr>
                    <td>1,2,4,5-Tetrachloro-3-nitrobenzene</td>
                    <td>260.88</td>
                    <td>~7.8-8.4 ppm (singlet, 1H)</td>
                </tr>
                <tr>
                    <td>Ethyl 4-(dimethylamino)benzoate</td>
                    <td>193.24</td>
                    <td>~3.0 ppm (singlet, 6H, N(CH₃)₂)</td>
                </tr>
                <tr>
                    <td>Thymol</td>
                    <td>150.22</td>
                    <td>~2.3 ppm (singlet, 3H, CH₃)</td>
                </tr>
                <tr>
                    <td>Benzyl benzoate</td>
                    <td>212.24</td>
                    <td>~5.3 ppm (singlet, 2H, CH₂)</td>
                </tr>
                <tr>
                    <td>1,2,4,5-Tetramethylbenzene</td>
                    <td>134.22</td>
                    <td>~2.18 ppm (singlet, 12H, CH₃)</td>
                </tr>
                <tr>
                    <td>Dimethylmalonic acid</td>
                    <td>132.11</td>
                    <td>~1.3-1.4 ppm (singlet, 6H, CH₃)</td>
                </tr>
                <tr>
                    <td>Methyl 3,5-dinitrobenzoate</td>
                    <td>226.14</td>
                    <td>~4.1 ppm (singlet, 3H, OCH₃)</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="card">
        <h3>Purity Calculator</h3>
        <form id="qnmr-form">
            <div class="form-grid">
                <div class="form-group">
                    <label for="I_an">Analyte Integral (\(I_{an}\))</label>
                    <input type="number" step="any" id="I_an" required>
                </div>
                <div class="form-group">
                    <label for="N_an">Analyte No. Protons (\(N_{an}\))</label>
                    <input type="number" step="1" id="N_an" required>
                </div>
                <div class="form-group">
                    <label for="MW_an">Analyte M.W. (\(MW_{an}\))</label>
                    <input type="number" step="any" id="MW_an" required>
                </div>
                <div class="form-group">
                    <label for="I_std">Standard Integral (\(I_{std}\))</label>
                    <input type="number" step="any" id="I_std" required>
                </div>
                <div class="form-group">
                    <label for="N_std">Standard No. Protons (\(N_{std}\))</label>
                    <input type="number" step="1" id="N_std" required>
                </div>
                <div class="form-group">
                    <label for="MW_std">Standard M.W. (\(MW_{std}\))</label>
                    <input type="number" step="any" id="MW_std" required>
                </div>
                 <div class="form-group">
                    <label for="m_sample">Sample Mass (mg)</label>
                    <input type="number" step="any" id="m_sample" required>
                </div>
                <div class="form-group">
                    <label for="m_std">Standard Mass (mg)</label>
                    <input type="number" step="any" id="m_std" required>
                </div>
                <div class="form-group">
                    <label for="P_std">Standard Purity (\(P_{std}\)) [%]</label>
                    <input type="number" step="any" id="P_std" value="100.0" required>
                </div>
            </div>
            <button type="submit">Calculate Purity</button>
        </form>

        <div id="result-container" class="hidden">
            <h3>Calculation Result</h3>
            <p id="result"></p>
        </div>
    </div>
    
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "\\[", right: "\\]", display: true},
                {left: "\\(", right: "\\)", display: false}
            ],
            throwOnError: false
        });

        document.getElementById('qnmr-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const I_an = parseFloat(document.getElementById('I_an').value);
            const N_an = parseFloat(document.getElementById('N_an').value);
            const MW_an = parseFloat(document.getElementById('MW_an').value);
            const I_std = parseFloat(document.getElementById('I_std').value);
            const N_std = parseFloat(document.getElementById('N_std').value);
            const MW_std = parseFloat(document.getElementById('MW_std').value);
            const P_std = parseFloat(document.getElementById('P_std').value);
            const m_sample = parseFloat(document.getElementById('m_sample').value);
            const m_std = parseFloat(document.getElementById('m_std').value);

            const resultContainer = document.getElementById('result-container');
            const resultElement = document.getElementById('result');

            if ([I_std, N_an, MW_std, m_sample].some(v => v === 0) || [I_an, N_an, MW_an, I_std, N_std, MW_std, P_std, m_sample, m_std].some(isNaN)) {
                resultElement.textContent = 'Error: Check the entered values. Some fields cannot be zero or non-numeric.';
                resultElement.style.color = '#dc3545';
                resultContainer.classList.remove('hidden');
                return;
            }

            const purityPercent = (I_an / I_std) * (N_std / N_an) * (MW_an / MW_std) * (m_std / m_sample) * P_std;

            resultElement.innerHTML = `Calculated Purity: <strong>${purityPercent.toFixed(2)} %</strong>`;
            resultElement.style.color = '#28a745'; 
            resultContainer.classList.remove('hidden');
        });
    });
</script>

</body>
</html>